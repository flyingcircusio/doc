---
Publish Date: 'YYYY-MM-DD'
---

# Release 2024_028 (unreleased)

## Impact

- \[NixOS 24.05] varnish will be restarted.

## NixOS 24.05 platform

- matomo: Matomo 5.x is now officially supported for new instances and upgrades from 4.x. See {external+platform-current:ref}`nixos-matomo-upgrade` (PL-132236).
- webproxy/varnish: use varnish default work dir and restart varnish on unit file changes.
  Before, we always reloaded the service which can cause various problems when changes are not picked up. We ran into this problem when the varnish work dir changed in NixOS. To simplify things, we also override the work dir and use the varnish default of `/run/varnishd` instead of symlinking it to a different location. This path is checked by CLI tools like varnishadm, for example. (PL-132901).
- gitlab: security update 17.2.5 -> 17.2.7 (PL-132033).
- Add {command}`rclone` as default package.

## NixOS 23.11 platform

- nothing yet

## NixOS 23.05 platform

- nothing yet

## NixOS 22.11 platform

- nothing yet

## NixOS 22.05 platform

- nothing yet

## NixOS 21.11 platform

- nothing yet

## NixOS 21.05 platform

- nothing yet

## NixOS 20.09 platform

- nothing yet

## NixOS 15.09 platform

- nothing yet

## Gentoo platform

- nothing yet

## Documentation

- nothing yet

## Detailed Changes

- NixOS 24.05: [platform code](https://github.com/flyingcircusio/fc-nixos/compare/fc/r2024_027/24.05...),
 [nixpkgs/upstream changes](https://github.com/flyingcircusio/nixpkgs/compare/ac9a8c52e1e69847cef1d41c9661034dc3909149...4c934f9fa9a0c9239a1bc2817d01231807f5d2ba)

% vim: set spell spelllang=en:
