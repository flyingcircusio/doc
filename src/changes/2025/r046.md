---
Publish Date: '2025-12-08'
---


# Release 2025_046 (2025-12-08)

## Impact

### 25.05

- k3s clusters with custom `clusterDNS`, `podCidr`, `serviceCidr` will fail to evaluate until adapted. See the change description below for details.

- Machines will reboot to activate the changed kernel.


### 25.11

## NixOS 25.05 platform

- k3s clusters: options `clusterDns`, `podCidr`, `serviceCidr` are now a list

  affected roles: `k3s-agent`, `k3s-server`, `k3s-single-node`, `webgateway` when in a resource group with k3s nodes (PL-133889)

  The options `clusterDns`, `podCidr`, `serviceCidr` in the namespace `flyingcircus.kubernetes.network` have changed
  from option type *string* to a *list of strings*. This better reflects the ability to specify multiple IP
  address entries and process them at other parts of the configuration. \
  Deployments deviating from the default option value require manual adjustment of the option. The new system
  will fail to evaluate, preventing this release from bein installed automatically until the configuration
  value has been adjusted.

- ai-model-server: GPU monitoring amd_rocm_smi plugin: ensure all global tags are included but only include rocm specific tags that do not endanger label cardinality. Note: we include all fields, some are converted to tags but those are fine

- nixos/k3s: Fix resolving of cluster-internal hostnames in our frontend module (PL-134217)

- KVM hosts: fix a regression in maintenance handling (PL-134247)
  fc.qemu accidentally scrapped return codes set via sys.exit and replaced them with a 0, rendering maintenance guards ineffective. \
  Has been released as a hotfix to affected hosts ahead of schedule.

- Pull upstream NixOS changes, security fixes, and package updates:
    - firefox: 145.0.1 -> 145.0.2
    - gitaly: 18.5.2 -> 18.6.1
    - gitlab: 18.5.2 -> 18.6.1
    - gitlab-container-registry: 4.31.0 -> 4.32.0
    - gitlab-ee: 18.5.2 -> 18.6.1
    - gitlab-pages: 18.5.2 -> 18.6.1
    - gitlab-workhorse: 18.5.2 -> 18.6.1
    - grafana: 12.0.6 -> 12.0.7
    - linuxKernelStable: 6.12.58 -> 6.12.59
    - linuxKernelVerify: 6.12.58 -> 6.12.59
    - mastodon: 4.3.14 -> 4.3.15
    - percona: 8.0.43-34 -> 8.0.44-35
    - percona-server_8_0: 8.0.43-34 -> 8.0.44-35
    - percona80: 8.0.43-34 -> 8.0.44-35
    - php83: 8.3.27 -> 8.3.28
    - php84: 8.4.14 -> 8.4.15
    - webkitgtk: 2.50.1 -> 2.50.2


## NixOS 25.11 platform

- KVM hosts: fix a regression in maintenance handling (PL-134247)
  fc.qemu accidentally scrapped return codes set via sys.exit and replaced them with a 0, rendering maintenance guards ineffective. \
  Has been released as a hotfix to affected hosts ahead of schedule.

- Pull upstream NixOS changes, security fixes, and package updates:
    - matrix-synapse: 1.142.1 -> 1.143.0


## Detailed Changes

- NixOS 25.05: [platform code](https://github.com/flyingcircusio/fc-nixos/compare/7d7110d12381e79588cc6124b057754a06b486e2...c4b06461586d86b7fc334bfe462bff90ed79eec5), [nixpkgs/upstream changes](https://github.com/flyingcircusio/nixpkgs/compare/c1da39e192f819c0ebc8ff81ae829a7e6969804f...62f4129a2097dc4c9dd6e9090cb5d1a90d8d5c9c), [metadata](https://my.flyingcircus.io/releases/metadata/fc-25.05-production/2025_046), [channel url](https://hydra.flyingcircus.io/build/37092970/download/1/nixexprs.tar.xz)

- NixOS 25.11: [platform code](https://github.com/flyingcircusio/fc-nixos/compare/ba62df044ef7f0ee6ac1c7f30a88b2850f33987f...98042009db0aca3994b4bd083045e24d6949449f), [nixpkgs/upstream changes](https://github.com/flyingcircusio/nixpkgs/compare/a95730b1cb21239894bf161488fbbf2cb06bbd1f...d49a756b23d2bcdf344c2b3990644816610bbc26), [metadata](https://my.flyingcircus.io/releases/metadata/fc-25.11-production/2025_046), [channel url](https://hydra.flyingcircus.io/build/37089457/download/1/nixexprs.tar.xz)


